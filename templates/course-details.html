
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Spark Education - Your Interactive Learning Assistance</title>

    <link rel="stylesheet" href="/static/css/themify-icons.css">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon.png">
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/feather.css">
    <link rel="stylesheet" href="/static/css/video-player.css">

</head>
<body class="color-theme-blue mont-font">

    <div class="preloader"></div>

    

    <div class="main-wrap">
        <!-- header wrapper -->
        <div class="upper-header bg-greylight">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-xs-6 d-none d-block-md">
                        <ul class="list-inline list-item-style mt-0 float-left pl-1">
                            <li class="list-inline-item pl-0"><a href="#">(+966)555555555</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6 col-xs-6 d-none d-block-md">
                        <ul class="list-inline list-item-style mt-0 float-right">
                            <li class="list-inline-item"><a href="#"><i class="ti-user mr-2"></i> My Account</a></li>
                        </ul>
                    </div>
                    <div class="col-12 d-none d-lg-block">
                        <ul class="list-inline list-item-style mt-0 float-left pl-1">
                            <li class="list-inline-item pl-0"><a href="#">PRIVACY</a></li>
                            <li class="list-inline-item"><a href="#">CUSTOMER SERVICE </a></li>                            
                        </ul>

                        <ul class="list-inline list-item-style mt-0 float-right">
                            <li class="list-inline-item"><a href="#"><i class="ti-user mr-2"></i> My Account</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-wrapper pt-3 pb-3 shadow-xss">
            <div class="container">
                <div class="row">
                    <div class="col-lg-9 navbar pt-0 pb-0">
                        <a href="./index.html"><h1 class="fredoka-font ls-3 fw-700 text-current font-xxl">Spark Education <span class="d-block font-xsssss ls-1 text-grey-500 open-font ">Your Interactive Learning Assistance</span></h1></a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNavDropdown">
                            <ul class="navbar-nav nav-menu float-none text-center">
                                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Home <i class="ti-angle-down"></i></a>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="./home-1.html">Home One</a>
                                        <a class="dropdown-item" href="./home-2.html">Home Two</a>
                                        <a class="dropdown-item" href="./home-3.html">Home Three</a>
                                        <a class="dropdown-item" href="./home-4.html">Home Four</a>
                                        <a class="dropdown-item" href="./home-5.html">Home Five</a>
                                        <a class="dropdown-item" href="./home-6.html">Home Six</a>
                                        
                                        <a class="dropdown-item" href="/static/coming-soon.html">Coming Soon</a>
                                        
                                    </div>
                                
                                </li>
                                <li class="nav-item dropdown"><a class="nav-link  dropdown-toggle" data-toggle="dropdown" href="#">Pages <i class="ti-angle-down"></i></a>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="./about.html">About</a>
                                        <a class="dropdown-item" href="./contact.html">Contact</a>
                                        <a class="dropdown-item" href="./contact-two.html">Contact 2</a>
                                        <a class="dropdown-item" href="./404.html">404</a>
                                    </div>
                                </li>
                                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Blog <i class="ti-angle-down"></i></a>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="./blog.html">Blog Default</a>
                                        <a class="dropdown-item" href="./blog-sidebar.html">Blog Sidebar</a>
                                         
                                        <a class="dropdown-item" href="./blog-single.html">Blog Single</a>
                                        
                                    </div>
                                </li>
                                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Course <i class="ti-angle-down"></i></a>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="./courses-grid-1.html">Course Gird 1</a>
                                        <a class="dropdown-item" href="./courses-grid-2.html">Course Gird 2</a>
                                        <a class="dropdown-item" href="./courses-grid-3.html">Course Gird 3</a>
                                        <a class="dropdown-item" href="./course-details.html">Single Course 1</a>
                                        <a class="dropdown-item" href="./course-details-2.html">Single Course 2</a>
                                        <a class="dropdown-item" href="./user-profile.html">User Profile</a>
                                        <a class="dropdown-item" href="./author-profile.html">Author Profile</a>
                                    </div>
                                </li>
                                <li class="nav-item"><a class="nav-link" href="/static/contact.html">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 text-right d-none d-lg-block">
                        <!-- <a href="#" data-toggle="modal" data-target="#ModalCart" class="float-right text-center mt-1 ml-4 text-grey-800 position-relative"><i class="ti-shopping-cart font-lg"></i><span class="font-xssss fw-500 d-block lh-1">Cart</span> <span class="icon-count bg-current">3</span></a> -->
                        <a href="#" class="float-right text-center mt-1 ml-4 text-grey-800 position-relative"><i class="ti-heart font-lg"></i><span class="font-xssss fw-500 d-block lh-1">Saved</span> <span class="icon-count bg-current">2</span></a>
                        <a href="#" class="float-right d-none d-lg-block text-center mt-1 ml-4 text-grey-800"><i class="ti-user font-lg"></i><span class="font-xssss fw-500 d-block lh-1">Account</span></a>
                    </div>
                </div>
            </div>
        </div>
        <!-- header wrapper -->

        <div class="course-details pt-lg--7 pb-lg--7 pt-5 pb-5">
            <div class="container">
                <div class="row">
                    <div class="col-xl-8 col-xxl-9 col-lg-8">
                        <div class="card border-0 mb-0 rounded-lg overflow-hidden">
                            <div class="player shadow-none">
                                <video id='vidAssistance' src="" playsinline></video>
                                    <div class='play-btn-big'></div>
                                    <div class='controls'>
                                        <div class="time"><span class="time-current"></span><span class="time-total"></span></div>
                                        <div class='progress'>
                                            <div class='progress-filled'></div>
                                        </div>
                                        <div class='controls-main'>
                                            <div class='controls-left'>
                                                <div class='volume'>
                                                    <div class='volume-btn loud mt-1'>
                                                        <i class="feather-volume-1 font-xl text-white"></i>
                                                    </div>
                                                    <div class='volume-slider'>
                                                        <div class='volume-filled'></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='play-btn paused'></div>
                                            <div class="controls-right">
                                                <div class='speed'>
                                                    <ul class='speed-list'>
                                                        <li class='speed-item' data-speed='0.5'>0.5x</li>
                                                        <li class='speed-item' data-speed='0.75'>0.75x</li>
                                                        <li class='speed-item active' data-speed='1'>1x</li>
                                                        <li class='speed-item' data-speed='1.5'>1.5x</li>
                                                        <li class='speed-item' data-speed='2'>2x</li>
                                                    </ul>
                                                </div>
                                                <div class='fullscreen'>
                                                    <svg width="30" height="22" viewBox="0 0 30 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 0V-1.5H-1.5V0H0ZM0 18H-1.5V19.5H0V18ZM26 18V19.5H27.5V18H26ZM26 0H27.5V-1.5H26V0ZM1.5 6.54545V0H-1.5V6.54545H1.5ZM0 1.5H10.1111V-1.5H0V1.5ZM-1.5 11.4545V18H1.5V11.4545H-1.5ZM0 19.5H10.1111V16.5H0V19.5ZM24.5 11.4545V18H27.5V11.4545H24.5ZM26 16.5H15.8889V19.5H26V16.5ZM27.5 6.54545V0H24.5V6.54545H27.5ZM26 -1.5H15.8889V1.5H26V-1.5Z" transform="translate(2 2)" fill="white"/>
                                                    </svg>
                                                </div>
                                            </div>
                                        

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="courseTitle" class="card d-block border-0 rounded-lg overflow-hidden dark-bg-transparent bg-transparent mt-4 pb-3">
                            <div class="row">
                                <div class="col-10"><h2 class="fw-700 font-md d-block lh-4 mb-2">Human Heart</h2></div>
                                <div style="padding-left: 25px;padding-right: 25px;" id="question"></div>
                            </div>
                        </div>

                        <div id="syllpuys" class="card d-block border-0 rounded-lg overflow-hidden mt-2">
                            <div id="accordion" class="accordion mb-0">
                                <div class="card shadow-xss mb-0">
                                    <div class="card-header bg-greylight theme-dark-bg" id="headingOne">
                                        <h5 class="mb-0"><button class="btn font-xsss fw-600 btn-link " data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne"> Chapter 1 </button></h5>
                                    </div>
                                    <div id="collapseOne" class="collapse p-3 show" aria-labelledby="headingOne" data-parent="#accordion">
                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">1</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Introduction to the Heart</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">12:34</span>
                                        </div>

                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">2</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Function of Human Heart</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">10:34</span>
                                        </div>

                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">3</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Parts if Human Heart</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">10:34</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card shadow-xss mb-0">
                                    <div class="card-header bg-greylight theme-dark-bg" id="headingTwo">
                                        <h5 class="mb-0"><button class="btn font-xsss fw-600 btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo"> Chapter 2 </button></h5>
                                    </div>
                                    <div id="collapseTwo" class="collapse p-3" aria-labelledby="headingTwo" data-parent="#accordion">
                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">1</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Structure of Human Heart</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">12:34</span>
                                        </div>

                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">2</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Artries and veins</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">10:34</span>
                                        </div>

                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">3</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Blood Flow</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">10:34</span>
                                        </div>

                                        <div class="card-body d-flex p-2">
                                            <span class="bg-current btn-round-xs rounded-lg font-xssss text-white fw-600">4</span>
                                            <span class="font-xssss fw-500 text-grey-500 ml-2">Evaluation</span>
                                            <span class="ml-auto font-xssss fw-500 text-grey-500">10:34</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-xxl-3 col-lg-4">
                        <div class="card p-4 mb-4 bg-primary border-0 shadow-xss rounded-lg">
                            <div class="card-body">
                                <h3 class="text-white">Ask Your Virtual Assistance</h3>
                                <br />
                                <a id="recordButton" onclick="startRecording()" href="#" class="btn-round-xl d-md-inline-block d-none bg-success m-3 z-index-1">
                                    <i class="feather-mic-off text-white font-md"></i>
                                </a>
                                <a id="stopButton" onclick="stopRecording()" style="visibility: hidden;" href="#" class="btn-round-xl d-md-inline-block d-none bg-danger m-3 z-index-1">
                                    <i class="feather-mic-off text-white font-md"></i>
                                </a>
								<div id="audioPlayer"></div>
                            </div>
                        </div>
                </div>
            </div>
        </div>

       



        <!-- footer wrapper -->
        <div class="footer-wrapper mt-0">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-md-12 col-lg-4 col-sm-9 col-xs-12 md-mb25">
                                <a href="/static/index.html"><h1 class="fredoka-font ls-3 fw-700 text-current font-xxl">Spark Education <span class="d-block font-xsssss ls-1 text-grey-500 open-font ">Your Interactive Learning Assistance</span></h1></a>
                                <p class="w-100 mt-5">41 madison ave, floor 24 new work, <br>NY 10010 1-877-932-7111 <br> support@mail.com</p>
                                <ul class="list-inline">
                                <li class="list-inline-item mr-3"><a href="#"><i class="ti-facebook"></i></a></li>
                                <li class="list-inline-item mr-3"><a href="#"><i class="ti-twitter-alt"></i></a></li>
                                <li class="list-inline-item mr-3"><a href="#"><i class="ti-linkedin"></i></a></li>
                                <li class="list-inline-item"><a href="#"><i class="ti-instagram"></i></a></li>
                            </ul>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-3 col-xs-6 md-mb25">
                                <h5>Language</h5>
                                <ul>
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">Spanish</a></li>
                                    <li><a href="#">Arab</a></li>
                                    <li><a href="#">Urdu</a></li>
                                    <li><a href="#">Brazil</a></li>
                                </ul>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-4 col-xs-6">
                                <h5>Channel</h5>
                                <ul>
                                    <li><a href="#">Makeup</a></li>
                                    <li><a href="#">Dresses</a></li>
                                    <li><a href="#">Girls</a></li>
                                    <li><a href="#">Sandals</a></li>
                                    <li><a href="#">Headphones</a></li>
                                </ul>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-4 col-xs-6">
                                <h5>About</h5>
                                <ul>
                                    <li><a href="#">FAQ</a></li>
                                    <li><a href="#">Term of use</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">Feedback</a></li>
                                    <li><a href="#">Careers</a></li>
                                </ul>
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-4 col-xs-6">
                                <h5 class="mb-3">Office</h5>
                                <p style="width: 100%;">41 madison ave, floor 24 new work, NY 10010 <br>1-877-932-7111</p>
                                <p style="width: 100%;">41 madison ave, floor 24 new work, NY 10010 <br>1-877-932-7111</p>
                            </div>
                        </div>
                        <div class="middle-footer mt-5 pt-4"></div>
                    </div>
                    <div class="col-sm-12 lower-footer pt-0"></div>
                    <div class="col-sm-6 col-xs-12">
                        <p class="copyright-text">© 2021 copyright. All rights reserved.</p>
                    </div>
                    <div class="col-sm-6 col-xs-12 text-right">
                        <p class="copyright-text float-right">Design by <a href="#" class="">uitheme</a></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- footer wrapper -->

    </div> 

    <div id="loader">
        <span>Processing the Materials</span>
    </div>

    <script src="/static/js/plugin.js"></script>
    <script src="/static/js/scripts.js"></script>
    

    <script src="/static/js/video-player.js"></script>
      <script>
    let mediaRecorder;
    let chunks = [];

    const recordButton = document.getElementById('recordButton');
    const stopButton = document.getElementById('stopButton');
    const audioPlayer = document.getElementById('audioPlayer');
    const vidAssistance = document.getElementById('vidAssistance');
    const question = document.getElementById('question');
    

    function startRecording() {
      navigator.mediaDevices.getUserMedia({ audio: true })
        .then(function(stream) {
          mediaRecorder = new MediaRecorder(stream);

          mediaRecorder.addEventListener('dataavailable', function(e) {
            // console.log(e.data);
            chunks.push(e.data);
            RecordingReady();
          });

          mediaRecorder.start();
          
          vidAssistance.pause();
          recordButton.style.visibility = 'hidden';
          stopButton.style.visibility = 'visible';
        })
        .catch(function(err) {
          console.error('Error accessing microphone:', err);
        });
        
    }

    function stopRecording() {
        document.getElementById('loader').style.display="block";
        mediaRecorder.stop();
        recordButton.style.visibility ='visible' ;
        stopButton.style.visibility = 'hidden';

    }

    function RecordingReady() {
      const recordedBlob = new Blob(chunks, { type: 'audio/webm' });
      const audioElement = document.createElement('audio');
      audioElement.src = URL.createObjectURL(recordedBlob);
      doSubmit(recordedBlob);
      audioElement.controls = true;
    }

    function doSubmit(recordedBlob) {
      console.log('doSubmit called');
    // Create a form and append the recordedBlob as a file
    const form = new FormData();
    form.append('audio', recordedBlob, 'recording.webm');

    
    // Send the form data to the Flask route using a POST request
    fetch('/transcribe', {method: 'POST', body: form})
      .then(response => response.json())
      .then(data => {
        // Process the transcription response from the server
        document.getElementById('loader').style.display="none";
        const chate = document.createElement('p');
        chate.innerHTML = data.transcription;
        question.appendChild(chate);
        vidAssistance.src='/static/Heart.mp4';
        vidAssistance.play();
        var transcript = JSON.stringify( {'transcript': data.transcription});
        return fetch('/videoTalk', {method: 'POST', body: transcript, headers:{'content-type': 'application/json'}});
        
    })
      .catch(error => {
        // Handle any errors during the request
        console.error('Error:', error);
      });

    }

  </script>
</body>

</html>